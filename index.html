<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    
</head>
<body>

    <div>
        <div>Your Score:
            <div id="playerScore"></div>
        </div>

        <br>

        <div class="score">Computer Score:
            <div id="computerScore"></div>
        </div>
    
    </div>

    <br>

    <div>Message:
        <div id="message"></div>
    </div>

    <br>

    <div>Round:
        <div id="roundCounter"></div>
    </div>

    <div class="resetContainer">
        <a href = "/home/george/repos/rock-paper-scissors/rockpaperscissors/index.html"
        class ="reset">Reset</a>
    </div>

    <div class="topButton">
        <button class="rock"><img src="rock.png"/></button>
    </div>

    <div class="bottomButtons">
        <button class="paper"><img src="paper.png"/></button>
        <button class="scissors"><img src="scissors.png"/></button>
    </div>

    <!-- JavaScript for the game -->
    <script>
        
        let playerSelection;
        let computerScore = 0;
        let playerScore = 0;
        let roundCounter = 0;


        // function to generate random computer's selection
        function getComputerSelection() {
            let index = Math.floor(Math.random() * 100);
            if (index <= 33.33) {
                return 'rock';
            } else if (index >= 33.34 && index <= 66.66) {
                return 'paper';
            } else {
                return 'scissors';
            }
        }

                                                                                            
        
        
        function resetGame() {
            computerScore = 0;
            playerScore = 0;
            roundCounter = 0;
            document.getElementById('computerScore').textContent = computerScore;
            document.getElementById('playerScore').textContent = playerScore;
            document.getElementById('roundCounter').textContent = roundCounter;

        }

      
        // function for playing one round
        function playRound() {

            let computerSelection = getComputerSelection();
            if(roundCounter > 4) {
                resetGame();
            }


            

           
            
            if(playerSelection == computerSelection) {
                    document.getElementById('message').textContent = 'Tie!';
                    
                }
            else if(playerSelection == 'rock') {
                if (computerSelection == 'paper') {
                        ++computerScore;
                        document.getElementById('computerScore').textContent = computerScore;
                        document.getElementById('message').textContent = 'Round loss';

                } else {
                        ++playerScore;
                        document.getElementById('playerScore').textContent = playerScore;
                        document.getElementById('message').textContent = 'Round won';

                }
            }
            else if(playerSelection == 'scissors') {
                if (computerSelection == 'rock') {
                    ++computerScore;
                    document.getElementById('computerScore').textContent = computerScore;
                    document.getElementById('message').textContent = 'Round loss';

                } else {
                    ++playerScore;
                    document.getElementById('playerScore').textContent = playerScore;
                    document.getElementById('message').textContent = 'Round won';

                }
            }
            else if(playerSelection == 'paper') {
                if (computerSelection == 'scissors') {
                    ++computerScore;
                    document.getElementById('computerScore').textContent = computerScore;
                    document.getElementById('message').textContent = 'Round loss';

                } else {
                    ++playerScore;
                    document.getElementById('playerScore').textContent = playerScore;
                    document.getElementById('message').textContent = 'Round won';

                }
            }  

            ++roundCounter;
            document.getElementById('roundCounter').textContent = roundCounter;

            if(roundCounter >= 5) {
                if(playerScore > computerScore) {
                    document.getElementById('message').textContent = 'Game over. You win!';
                  
                } else {
                    document.getElementById('message').textContent = 'Game over. You lose!';
                }
            }
            
        }


        


        // adding event and listener to rock, paper and scissors buttons
        
        const btns = document.querySelectorAll('button')
        btns.forEach(button => button.addEventListener('click', PlayerSelect));

        // function for geting player's selection via button listener
        function PlayerSelect() {
            document.getElementById('message').textContent = '';
            playerSelection = this.classList.value;
            playRound();
            }
    

    </script>
</body>
</html>