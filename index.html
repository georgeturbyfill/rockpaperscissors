<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button class="rock">Rock</button>
    <button class="paper">Paper</button>
    <button class="scissors">Scissors</button>
    
    <br>

    <div>
        <div>Your Score:
            <div id="playerScore"></div>
        </div>

        <br>

        <div>Computer Score:
            <div id="computerScore"></div>
        </div>
    
    </div>

    <br>

    <div>Message:
        <div id="message"></div>
    </div>

    <script>
        
        let playerSelection;
        let computerScore = 0;
        let playerScore = 0;
        let roundCounter = 0;


        // function to generate random computer's selection
        function getComputerSelection() {
            let index = Math.floor(Math.random() * 100);
            if (index <= 33.33) {
                return 'rock';
            } else if (index >= 33.34 && index <= 66.66) {
                return 'paper';
            } else {
                return 'scissors';
            }
        }
                                                                                            
        // function for geting player's selection via button listener
        function PlayerSelect() {
            document.getElementById('message').textContent = '';
            playerSelection = this.classList.value;
            // if(roundCounter > 5) {
            //     if(playerScore > computerScore) {
            //         document.getElementById('message').textContent = 'Game over. You win!';
            //         playerScore = 0;
            //     } else {
            //         document.getElementById('message').textContent = 'Game over. You lose!';
            //         computerScore = 0;
            //     }
            // } else {
            playRound();
            }
        

      
        // function for playing one round
        function playRound() {
            ++roundCounter;

            if(roundCounter > 5) {
                if(playerScore > computerScore) {
                    document.getElementById('message').textContent = 'Game over. You win!';
                    playerScore = 0;
                } else {
                    document.getElementById('message').textContent = 'Game over. You lose!';
                    computerScore = 0;
                }
            } else {

                let computerSelection = getComputerSelection();
                
                if(playerSelection == computerSelection) {
                        document.getElementById('message').textContent = 'Tie!';
                        
                    }
                else if(playerSelection == 'rock') {
                    if (computerSelection == 'paper') {
                            ++computerScore;
                            document.getElementById('computerScore').textContent = computerScore;
                            
                    } else {
                            ++playerScore;
                            document.getElementById('playerScore').textContent = playerScore;

                    }
                }
                else if(playerSelection == 'scissors') {
                    if (computerSelection == 'rock') {
                        ++computerScore;
                        document.getElementById('computerScore').textContent = computerScore;

                    } else {
                        ++playerScore;
                        document.getElementById('playerScore').textContent = playerScore;

                    }
                }
                else if(playerSelection == 'paper') {
                    if (computerSelection == 'scissors') {
                        ++computerScore;
                        document.getElementById('computerScore').textContent = computerScore;

                    } else {
                        ++playerScore;
                        document.getElementById('playerScore').textContent = playerScore;

                    }
                }  
            }
        }

        


        // adding event and listener to all three buttons
        const btns = document.querySelectorAll('button')
        btns.forEach(button => button.addEventListener('click', PlayerSelect));
        

    </script>
</body>
</html>